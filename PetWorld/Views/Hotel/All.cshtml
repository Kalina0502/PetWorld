@model PetWorld.Controllers.AllHotelRoomsQueryModel

@{
    ViewData["Title"] = "All Hotel Rooms";
}

<h2>All Hotel Rooms</h2>

<!-- Форма за филтриране -->
<form method="get" asp-action="All">
    <div>
        <label for="RoomType">Room Type:</label>
        <select id="RoomType" name="RoomType">
            <option value="">All</option>
            @foreach (var roomType in Model.RoomTypes)
            {
                <option value="@roomType">@roomType</option>
            }
        </select>
    </div>
    <div>
        <label for="CheckInDate">Check-in Date:</label>
        <input type="date" id="CheckInDate" name="CheckInDate" value="@Model.CheckInDate?.ToString("yyyy-MM-dd")" />
    </div>
    <div>
        <label for="CheckOutDate">Check-out Date:</label>
        <input type="date" id="CheckOutDate" name="CheckOutDate" value="@Model.CheckOutDate?.ToString("yyyy-MM-dd")" />
    </div>
    <div>
        <button type="submit">Search</button>
    </div>
</form>

<!-- Показване на хотелски стаи -->
<div>
    @if (Model.CheckInDate.HasValue && Model.CheckOutDate.HasValue && !string.IsNullOrWhiteSpace(Model.RoomType))
    {
        <h3>Hotel Rooms:</h3>
        @if (Model.HotelRooms.Any())
        {
            <ul>
                @foreach (var room in Model.HotelRooms)
                {
                    <li>
                        <div>
                            <h4>Room ID: @room.Id</h4>
                           
                            @if (room.IsAvailable)
                            {
                                <!-- Добавяне на формуляр за резервиране -->
                                <form method="get" asp-action="Reserve" asp-controller="Hotel" id="reserveForm">
                                    <input type="hidden" name="roomId" value="@room.Id" />
                                    <input type="hidden" name="checkInDate" value="@Model.CheckInDate?.ToString("yyyy-MM-dd")" />
                                    <input type="hidden" name="checkOutDate" value="@Model.CheckOutDate?.ToString("yyyy-MM-dd")" />

                                    <!-- Опции за включване на храна и разходка -->
                                    <div>
                                        <label for="includesFood">Includes Food:</label>
                                        <input type="checkbox" id="includesFood" name="includesFood" value="true" />
                                    </div>
                                    <div>
                                        <label for="includesWalk">Includes Walk:</label>
                                        <input type="checkbox" id="includesWalk" name="includesWalk" value="true" />
                                    </div>

                                    <button type="submit">Reserve</button>
                                </form>
                            }
                        </div>
                    </li>
                }
            </ul>
        }
        else
        {
            <p>No rooms available for the selected filters.</p>
        }
    }
    else
    {
        <p>Please enter your search criteria above to see available hotel rooms.</p>
    }
</div>
