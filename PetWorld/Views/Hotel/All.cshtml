@model PetWorld.Controllers.AllHotelRoomsQueryModel

@{
    ViewData["Title"] = "Hotel Rooms";
}

<h2>Here you can book a room</h2>

<div class="d-flex justify-content-end mb-3">
    <a href="@Url.Action("Add", "Hotel")" class="btn btn-primary">Add Room</a>
</div>

<div class="d-flex justify-content-end mb-3">
    <a href="@Url.Action("Delete", "Hotel")" class="btn btn-primary">Delete Room</a>
</div>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

<form method="get" asp-action="All">
    <div class="form-group">
        <label asp-for="RoomType">Room Type:</label>
        <select asp-for="RoomType" class="form-control">
            <option value="">All </option>
            @foreach (var roomType in Model.RoomTypes)
            {
                <option value="@roomType">@roomType</option>
            }
        </select>
    </div>
    <div class="form-group">
        <label asp-for="CheckInDate">Check-in Date:</label>
        <input asp-for="CheckInDate" class="form-control" type="date" />
    </div>
    <div class="form-group">
        <label asp-for="CheckOutDate">Check-out Date:</label>
        <input asp-for="CheckOutDate" class="form-control" type="date" />
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Search</button>
    </div>
</form>

<div>
    @if (Model.CheckInDate.HasValue && Model.CheckOutDate.HasValue && !string.IsNullOrWhiteSpace(Model.RoomType))
    {
        <h3>Hotel Rooms:</h3>
        @if (Model.HotelRooms.Any())
        {
            <ul class="list-group">
                @foreach (var room in Model.HotelRooms)
                {
                    <li class="list-group-item">
                        <div>
                            <h4>Room: @room.Id</h4>

                             <form method="get" asp-action="Reserve" asp-controller="Hotel">
                                    <input type="hidden" name="roomId" value="@room.Id" />
                                    <input type="hidden" name="checkInDate" value="@Model.CheckInDate?.ToString("yyyy-MM-dd")" />
                                    <input type="hidden" name="checkOutDate" value="@Model.CheckOutDate?.ToString("yyyy-MM-dd")" />

                                    <div>
                                        <label for="includesFood">Includes Food:</label>
                                        <input type="checkbox" id="includesFood" name="includesFood" value="true" />
                                    </div>
                                    <div>
                                        <label for="includesWalk">Includes Walk:</label>
                                        <input type="checkbox" id="includesWalk" name="includesWalk" value="true" />
                                    </div>

                                    <button type="submit" class="btn btn-success">Reserve</button>
                                </form>
                           
                        </div>
                    </li>
                }
            </ul>
        }
        else
        {
            <p>No rooms available for the selected filters.</p>
        }
    }
    else
    {
        <p>Please enter your search criteria above to see available hotel rooms.</p>
    }
